{"version":3,"sources":["checkin.js"],"names":["timer","getQRCode","$","url","apiDomain","type","ajax","profileUserId","data","res","console","log","success","hide","timerHandler","time","min","Math","floor","sec","concat","show","clearTimeout","setTimeout","isCheckin","attr","qrcode","error","xhr","document","on"],"mappings":"cAAA,WACE,IAAIA,EADL,SAAAC,IACCC,EAAIF,KAAJ,CAGIG,IAAKC,UAAU,uBAFnBC,KAASJ,OACLK,KAAK,CACLH,WAAcI,eAEdC,QAAK,SAAAC,GACHC,QAAAC,IAAAF,GAJGA,EAAAG,UAMLA,EAAAA,SAASC,OAWR,SAAAC,EAAAC,GAjBIL,QAAPC,IAAAI,GAmBD,IAAAC,EAAA,GAAAD,EAAA,GAAAE,KAAAC,MAAAH,EAAA,IAAA,IAAAE,KAAAC,MAAAH,EAAA,IAKC,IAAII,EAAc,GAARJ,EAAK,GAAMA,EAAK,GAAG,IAAIA,EAAK,GAHxCb,EAAA,SAASY,KAAT,GAAAM,OAAAJ,EAAA,KAAAI,OAA4BD,IAC1BT,GAAQC,GACRT,EAAIc,WAAUK,OACdnB,EAAIiB,SAAMJ,OACRO,aAAFtB,IACAA,EAAOuB,WAAI,WACPT,IAAFC,IACE,KArBAL,CAAAD,EAAAU,KAIKV,EAAIe,WAAWtB,EAAE,aAAamB,OAHnCnB,EAAGO,eAAYgB,KAAA,MAAAhB,EAAAiB,UAGbC,MAAA,SAAOH,GACPtB,QAAES,IAAAiB,MAoBJd,EAAAA,UAAAA,MAAY,WACbZ,EAAA,aAFDmB,OAGDnB,EAAA,SAAAmB,OACFX,QAAAC,IAAAJ,eAECsB,IAEA3B,EAAE,WAASmB,GAAX,QAAA,WACAX,EAAAA,SAAYH,OAEZN,EAAAA,WAASY,OAEPX,EAAA,SAAW4B,OACX5B,aAAWmB,GACXnB,QAjDN","file":"checkin.js","sourcesContent":["(function(){\r\n  let timer;\r\n  function getQRCode (){\r\n    $.ajax({\r\n      url: apiDomain+'/api/shaklee/checkin',\r\n      type: 'POST',\r\n      data:{\r\n        'lineUserId':profileUserId\r\n      },\r\n      success: function (res) {\r\n        console.log(res);\r\n        if(res.success){\r\n          $('#load').hide();\r\n          timerHandler(res.sec)\r\n          if(res.isCheckin) $('#received').show();\r\n          $('#qrCode img').attr('src',res.qrcode);\r\n        }\r\n      },\r\n      error: function (xhr) {\r\n        console.log(xhr)\r\n      }\r\n    });\r\n  }\r\n\r\n  function timerHandler(time) {\r\n    console.log(time)\r\n    let min = time/60>10?Math.floor(time/60):'0'+Math.floor(time/60);\r\n    let sec = time%60>10?time%60:'0'+time%60;\r\n    $(\"#time\").text(`${min}:${sec}`)\r\n    if(time<=0){\r\n      $('#reload').show();\r\n      $('#time').hide();\r\n      clearTimeout(timer);\r\n    }else{\r\n      timer = setTimeout(() => {\r\n        timerHandler(--time)\r\n      }, 1000);\r\n    }\r\n  }\r\n\r\n  $(document).ready(()=>{\r\n    $('#mainBody').show();\r\n    $('#load').show();\r\n    console.log(profileUserId);\r\n\r\n    getQRCode();\r\n\r\n    $('#reload').on('click',function(){\r\n      $('#load').show();\r\n      $('#reload').hide();\r\n      $('#time').show();\r\n      clearTimeout(timer);\r\n      getQRCode();\r\n    })\r\n  })\r\n})();"]}