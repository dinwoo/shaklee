{"version":3,"sources":["checkin.js"],"names":["timer","getQRCode","$","url","apiDomain","type","ajax","window","localStorage","getItem","data","res","console","log","success","hide","timerHandler","time","min","Math","floor","sec","concat","show","clearTimeout","setTimeout","isCheckin","attr","qrcode","error","xhr","document","on"],"mappings":"cAAA,WACE,IAAIA,EADL,SAAAC,IACCC,EAAIF,KAAJ,CAGIG,IAAKC,UAAU,uBAFnBC,KAASJ,OACLK,KAAK,CACLH,WAAcI,OAACC,aAAAC,QADV,kBAGLC,QAAK,SAAAC,GACHC,QAAAC,IAAAF,GAJGA,EAAAG,UAMLA,EAAAA,SAASC,OAWR,SAAAC,EAAAC,GAjBIL,QAAPC,IAAAI,GAmBD,IAAAC,EAAA,GAAAD,EAAA,GAAAE,KAAAC,MAAAH,EAAA,IAAA,IAAAE,KAAAC,MAAAH,EAAA,IAKC,IAAII,EAAc,GAARJ,EAAK,GAAMA,EAAK,GAAG,IAAIA,EAAK,GAHxCf,EAAA,SAASc,KAAT,GAAAM,OAAAJ,EAAA,KAAAI,OAA4BD,IAC1BT,GAAQC,GACRX,EAAIgB,WAAUK,OACdrB,EAAImB,SAAMJ,OACRO,aAAFxB,IACAA,EAAOyB,WAAI,WACPT,IAAFC,IACE,KArBAL,CAAAD,EAAAU,KAIKV,EAAIe,WAAWxB,EAAE,aAAaqB,OAHnCrB,EAAGS,eAAYgB,KAAA,MAAAhB,EAAAiB,UAGbC,MAAA,SAAOH,GACPxB,QAAEW,IAAAiB,MAoBJd,EAAAA,UAAAA,MAAY,WACbd,EAAA,aAFDqB,OAGDrB,EAAA,SAAAqB,OACFX,QAAAC,IAAAN,OAAAC,aAAAC,QAAA,kBAECsB,IAEA7B,EAAE,WAASqB,GAAX,QAAA,WACAX,EAAAA,SAAYL,OAEZN,EAAAA,WAASc,OAEPb,EAAA,SAAW8B,OACX9B,aAAWqB,GACXrB,QAjDN","file":"checkin.js","sourcesContent":["(function(){\r\n  let timer;\r\n  function getQRCode (){\r\n    $.ajax({\r\n      url: apiDomain+'/api/shaklee/checkin',\r\n      type: 'POST',\r\n      data:{\r\n        'lineUserId':window.localStorage.getItem('profileUserId')\r\n      },\r\n      success: function (res) {\r\n        console.log(res);\r\n        if(res.success){\r\n          $('#load').hide();\r\n          timerHandler(res.sec)\r\n          if(res.isCheckin) $('#received').show();\r\n          $('#qrCode img').attr('src',res.qrcode);\r\n        }\r\n      },\r\n      error: function (xhr) {\r\n        console.log(xhr)\r\n      }\r\n    });\r\n  }\r\n\r\n  function timerHandler(time) {\r\n    console.log(time)\r\n    let min = time/60>10?Math.floor(time/60):'0'+Math.floor(time/60);\r\n    let sec = time%60>10?time%60:'0'+time%60;\r\n    $(\"#time\").text(`${min}:${sec}`)\r\n    if(time<=0){\r\n      $('#reload').show();\r\n      $('#time').hide();\r\n      clearTimeout(timer);\r\n    }else{\r\n      timer = setTimeout(() => {\r\n        timerHandler(--time)\r\n      }, 1000);\r\n    }\r\n  }\r\n\r\n  $(document).ready(()=>{\r\n    $('#mainBody').show();\r\n    $('#load').show();\r\n    console.log(window.localStorage.getItem('profileUserId'));\r\n\r\n    getQRCode();\r\n\r\n    $('#reload').on('click',function(){\r\n      $('#load').show();\r\n      $('#reload').hide();\r\n      $('#time').show();\r\n      clearTimeout(timer);\r\n      getQRCode();\r\n    })\r\n  })\r\n})();"]}