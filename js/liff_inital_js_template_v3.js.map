{"version":3,"sources":["liff_inital_js_template_v3.js"],"names":["ArrLiffQueryString","EncodeQuertstring","ArrQuertString","$","ajax","url","checkStart","apiDomain","res","type","log","success","console","show","hide","xhr","GetLiffId","DecondeUtf8","decodestring","decodeString","GetArrQueryString","queryString","strUrl","getPara","ParaVal","indexOf","split","j","getSearch","length","aryPara","push","location","search","GetInLiffAppQuertString","i","InitializeLineLiffSdk","liffId","liff","init","then","isLoggedIn","Login","KeepInitializeLineLiffSdk","catch","err","message","getOS","isClient","isInClient","userAccessToken","getAccessToken","decodeedIdToken","getDecodedIDToken","context","getContext","contextViewType","contextUtouId","contextRoomId","contextGroupId","contextType","viewType","contextUserId","userId","utouId","roomId","groupId","profileUserId","profileDisplayName","profilePictureUrl","profile","profileStatusMessage","statusMessage","pictureUrl","os","alert","code","login","document","ready","test","navigator","userAgent"],"mappings":"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","file":"liff_inital_js_template_v3.js","sourcesContent":["var ArrLiffQueryString;\r\nvar EncodeQuertstring;\r\nvar DecodeQueryString;\r\nvar ArrQuertString;\r\n\r\nfunction checkStart(){\r\n  $.ajax({\r\n    url: apiDomain+'/api/shaklee/checkenable',\r\n    type: 'GET',\r\n    success: function (res) {\r\n      console.log(res);\r\n      if(res.success){\r\n        $('#mainBody').show();\r\n      }else{\r\n        $('#mainBody').hide();\r\n        $('#wait').show();\r\n      }\r\n    },\r\n    error: function (xhr) {\r\n      console.log(xhr)\r\n    }\r\n  });\r\n}\r\n$(document).ready(function () {\r\n  if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n    //mobile:只顯示網頁，讓人用掃的才能開啟\r\n    console.log('mobile');\r\n    //LIFF初始化是這段\r\n    // InitializeLineLiffSdk();\r\n  \r\n    //這邊是解LIFF導轉之後特有的解QueryString\r\n    ArrLiffQueryString = GetInLiffAppQuertString();\r\n    // EncodeQuertstring = ArrLiffQueryString[\"liff.state\"];\r\n    // DecodeQueryString = DecondeUtf8(EncodeQuertstring);\r\n    // ArrQuertString = GetArrQueryString(DecodeQueryString);\r\n    console.log(ArrLiffQueryString['debug']);\r\n    if(ArrLiffQueryString['debug']=='1'){\r\n      // 直接開始\r\n      console.log('直接開始')\r\n      // $('#mainBody').show();\r\n\r\n    }else{\r\n      // 打API判斷活動是否開始\r\n      console.log('打API判斷活動是否開始')\r\n      checkStart();\r\n    }\r\n\r\n  } else {\r\n    //pc:顯示qrcode\r\n    $('#QRCode').show();\r\n    $('#mainBody').hide();\r\n  }\r\n});\r\n\r\nfunction GetLiffId() {\r\n  //這段會依照每個帳戶不同更改\r\n  return \"1654884078-0nYB68dJ\";\r\n}\r\n\r\nfunction DecondeUtf8(decodestring) {\r\n  var decodeString = decodeURIComponent(decodestring);\r\n  console.log(decodeString);\r\n  return decodeString;\r\n}\r\n\r\nfunction GetArrQueryString(queryString) {\r\n  var strUrl = queryString;\r\n  var getPara, ParaVal;\r\n  var aryPara = [];\r\n\r\n  if (strUrl.indexOf(\"?\") !== -1) {\r\n    var getSearch = strUrl.split(\"?\");\r\n    getPara = getSearch[1].split(\"&\");\r\n    for (let j = 0; j < getPara.length; j++) {\r\n      ParaVal = getPara[j].split(\"=\");\r\n      aryPara.push(ParaVal[0]);\r\n      aryPara[ParaVal[0]] = ParaVal[1];\r\n    }\r\n  }\r\n  console.log(aryPara);\r\n  return aryPara;\r\n}\r\n\r\nfunction GetInLiffAppQuertString() {\r\n  var strUrl = location.search;\r\n  var getPara, ParaVal;\r\n  var aryPara = [];\r\n\r\n  if (strUrl.indexOf(\"?\") !== -1) {\r\n    var getSearch = strUrl.split(\"?\");\r\n    getPara = getSearch[1].split(\"&\");\r\n    for (let i = 0; i < getPara.length; i++) {\r\n      ParaVal = getPara[i].split(\"=\");\r\n      aryPara.push(ParaVal[0]);\r\n      aryPara[ParaVal[0]] = ParaVal[1];\r\n    }\r\n  }\r\n  console.log(aryPara);\r\n  return aryPara;\r\n}\r\n\r\n//liff.init()初始化\r\nfunction InitializeLineLiffSdk(liffId) {\r\n  liff\r\n    .init({\r\n      liffId: GetLiffId(),\r\n    })\r\n    .then(() => {\r\n      if (!liff.isLoggedIn()) {\r\n        alert(\"[Note] you're not login line now. It will turn to login page!\");\r\n        Login();\r\n        return false;\r\n      }\r\n      console.log('login OK')\r\n      KeepInitializeLineLiffSdk();\r\n\r\n    })\r\n    .catch((err) => {\r\n      alert(err.code);\r\n      alert(err.message);\r\n    });\r\n}\r\n\r\nfunction KeepInitializeLineLiffSdk() {\r\n  console.log('keep')\r\n      // start to use LIFF's api\r\n  var os = liff.getOS();\r\n\r\n  //true: Running in LINE browser\r\n  //false: Running in external browser\r\n  var isClient = liff.isInClient();\r\n\r\n  //true: The user is logged in\r\n  //false: The user is not logged in\r\n  var isLoggedIn = liff.isLoggedIn();\r\n  var userAccessToken = liff.getAccessToken();\r\n  var decodeedIdToken = liff.getDecodedIDToken();\r\n  var context = liff.getContext();\r\n\r\n  var contextType = \"\";\r\n  var contextViewType = \"\";\r\n  var contextUserId = \"\";\r\n  var contextUtouId = \"\";\r\n  var contextRoomId = \"\";\r\n  var contextGroupId = \"\";\r\n  if (context !== null) {\r\n    contextType = context.type;\r\n    contextViewType = context.viewType;\r\n    contextUserId = context.userId;\r\n    contextUtouId = context.utouId;\r\n    contextRoomId = context.roomId;\r\n    contextGroupId = context.groupId;\r\n  }\r\n\r\n  liff\r\n    .getProfile()\r\n    .then((profile) => {\r\n      profileUserId = profile.userId;\r\n      profileDisplayName = profile.displayName;\r\n      profilePictureUrl = profile.pictureUrl;\r\n      profileStatusMessage = profile.statusMessage;\r\n\r\n      //getProfile取得的資訊\r\n      // $(\"#profileUserId\").text(profileUserId);\r\n      // $(\"#profileDisplayName\").text(profileDisplayName);\r\n      // $(\"#profilePictureUrl\").text(profilePictureUrl);\r\n      // $(\"#profileStatusMessage\").text(profileStatusMessage);\r\n\r\n      //前面取得的資訊\r\n      // $(\"#os\").text(os);\r\n      // $(\"#isClient\").text(isClient);\r\n      // $(\"#isLoggedIn\").text(isLoggedIn);\r\n      // $(\"#userAccessToken\").text(userAccessToken);\r\n      // $(\"#decodeedIdToken\").text(decodeedIdToken);\r\n      // $(\"#contextType\").text(contextType);\r\n      // $(\"#contextViewType\").text(contextViewType);\r\n      // $(\"#contextUserId\").text(contextUserId);\r\n      // $(\"#contextUtouId\").text(contextUtouId);\r\n      // $(\"#contextRoomId\").text(contextRoomId);\r\n      // $(\"#contextGroupId\").text(contextGroupId);\r\n\r\n      //getProfile取得的資訊\r\n      console.log(\"profileUserId\", profileUserId);\r\n      console.log(\"profileDisplayName\", profileDisplayName);\r\n      console.log(\"profilePictureUrl\", profilePictureUrl);\r\n      console.log(\"profileStatusMessage\", profileStatusMessage);\r\n\r\n      //前面取得的資訊\r\n      console.log(\"os\", os);\r\n      console.log(\"isClient\", isClient);\r\n      console.log(\"isLoggedIn\", isLoggedIn);\r\n      console.log(\"userAccessToken\", userAccessToken);\r\n      console.log(\"decodeedIdToken\", decodeedIdToken);\r\n      console.log(\"contextType\", contextType);\r\n      console.log(\"contextUserId\", contextUserId);\r\n      console.log(\"contextUtouId\", contextUtouId);\r\n      console.log(\"contextRoomId\", contextRoomId);\r\n      console.log(\"contextGroupId\", contextGroupId);\r\n    })\r\n    .catch((err) => {\r\n      alert(err.code);\r\n      alert(err.message);\r\n    });\r\n}\r\n\r\nfunction Login() {\r\n  //liff.login({\r\n  //    redirectUri: 'https://www.google.com/'\r\n  //});\r\n\r\n  liff.login();\r\n}\r\n"]}