{"version":3,"sources":["liff_inital_js_template_v3.js"],"names":["ArrLiffQueryString","EncodeQuertstring","GetLiffId","decodeString","decodeURIComponent","console","decodestring","strUrl","queryString","ParaVal","getPara","aryPara","split","getSearch","i","length","push","log","GetInLiffAppQuertString","location","indexOf","InitializeLineLiffSdk","liffId","liff","init","then","isLoggedIn","KeepInitializeLineLiffSdk","alert","catch","err","code","message","os","getOS","isClient","isInClient","decodeedIdToken","context","getContext","contextType","getDecodedIDToken","contextViewType","contextUtouId","contextGroupId","contextUserId","utouId","contextRoomId","roomId","groupId","profilePictureUrl","profileStatusMessage","profileUserId","profileDisplayName","profile","userId","displayName","pictureUrl","statusMessage","userAccessToken","Login","login","$","document","DecodeQueryString"],"mappings":"aAAA,IAAIA,mBACAC,kBADAD,kBACAC,eAwBF,SAAAC,YAED,MAAA,sBAGC,SAAIC,YAAeC,GACnBC,EAAYF,mBAAZG,GAED,OADCD,QAAOF,IAAAA,GACRA,EAGC,SAAII,kBAAJC,GACA,IACWC,EADPC,EAASD,EACTE,EAAU,GAGZ,IAAuBC,IAAvBL,EAAIM,QAAYN,KAAa,CAC7BG,IAAAA,EAAUG,EAAaD,MAAM,KAAT,GAAGA,MAAM,KAC7B,IAAKE,EAAI,EAAGA,EAAIJ,EAAQK,OAAQD,IAC9BL,EAAUC,EAAQI,GAAGF,MAAM,KAC3BD,EAAQK,KAAKP,EAAQ,IACrBE,EAAQF,EAAQ,IAAMA,EAAQ,GAGlCJ,OAAAA,QAAQY,IAAIN,GAALA,EAIT,SAASO,0BAAT,IACeC,EADfZ,EAASW,SAAAA,OAEHR,EAASD,GAGb,IAA6B,IAAzBF,EAAOa,QAAQ,KAAa,CAAhC,IACEV,EADEH,EAAAK,MAAJ,KACkBL,GAAOK,MAAM,KAC7BF,IAAAA,EAAO,EAAGG,EAAAA,EAAaD,OAAbE,IAERL,EAAUC,EAAQI,GAAGF,MAAM,KAD7BD,EAAAK,KAAaP,EAAU,IACrBA,EAAOA,EAAGC,IAAWE,EAAX,GAIb,OADEP,QAAAY,IAAAN,GACFA,EAGF,SAEDU,sBAAAC,GAEEC,KACGC,KAAK,CAFVF,OAASD,cAGHC,KAAM,WAEPG,OAAKF,KAAAG,cAKHrB,QAAAY,IAAA,iBAEDU,8BANIC,MAAMF,iEACRE,SACK,KAORC,MAAM,SAAAC,GACLF,MAAME,EAAIC,MACVH,MAAME,EAAIE,WAIhB,SAASL,4BACPtB,QAAQY,IAAI,QAEZ,IAAIgB,EAAKV,KAAKW,QAOdC,EAAAZ,KAAAa,aAGIC,EAAAA,KAAkBd,aAClBe,EAAeC,KAAAA,iBAEfC,EAAJjB,KAAAkB,oBACIC,EAAAA,KAAeH,aAEfI,EAAa,GAEbC,EAAc,GAFdD,EAAgB,GAGhBL,EAAJ,GACEE,EAAcF,GACdI,OAAAA,IACAG,EAAaP,EAAGA,KACAA,EAAQQ,SACxBC,EAAgBT,EAAQU,OACxBJ,EAAcN,EAAUQ,OACzBC,EAAAT,EAAAU,OADCJ,EAAiBN,EAAQW,SAK3B,IAAIC,EACAC,EACAD,EAGAE,EACAC,KACAH,aACAC,KAAAA,SAAAA,GAGAC,EAAAE,EAAAC,OACAF,EAAAC,EAAAE,YACAN,EAAAI,EAAAG,WACAN,EAAAG,EAAAI,cAwBArD,QAAQY,IAAI,gBAAcS,GAC1BrB,QAAQY,IAAI,qBAAmB0C,GAC/BtD,QAAQY,IAAI,oBAAmBoB,GAC/BhC,QAAQY,IAAI,uBAAZkC,GAGA9C,QAAQY,IAAI,KAAAgB,GACZ5B,QAAQY,IAAI,WAAAkB,GAEbN,QAAMZ,IAAA,aAASS,GACdE,QAAUG,IAAL,kBAAL4B,GACA/B,QAAUI,IAAAA,kBAAVK,GA/CJhC,QAAAY,IAAA,cAAAuB,GAiDDnC,QAAAY,IAAA,gBAAA4B,GARKxC,QAAQY,IAAI,gBAAiB0B,GAUnCtC,QAAAY,IAAiB,gBAAA8B,GACf1C,QAAAY,IAAA,iBAAA2B,KAEAf,MAAA,SAAAC,GAEIF,MAAJE,EAAAC,MACDH,MAAAE,EAAAE,WAND,SAAS4B,QAKPrC,KAAKsC,QAtLPC,EAAAC,UAAIC,MAAAA,WAGF3D,QAAAY,IAAA,UAEEZ","file":"liff_inital_js_template_v3.js","sourcesContent":["var ArrLiffQueryString;\r\nvar EncodeQuertstring;\r\nvar DecodeQueryString;\r\nvar ArrQuertString;\r\n$(document).ready(function () {\r\n  // if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n    //mobile:只顯示網頁，讓人用掃的才能開啟\r\n    console.log('mobile');\r\n    //LIFF初始化是這段\r\n    InitializeLineLiffSdk();\r\n  \r\n    //這邊是解LIFF導轉之後特有的解QueryString\r\n    // ArrLiffQueryString = GetInLiffAppQuertString();\r\n    // EncodeQuertstring = ArrLiffQueryString[\"liff.state\"];\r\n    // DecodeQueryString = DecondeUtf8(EncodeQuertstring);\r\n    // ArrQuertString = GetArrQueryString(DecodeQueryString);\r\n\r\n  // } else {\r\n  //   //pc:顯示qrcode\r\n  //   $('#QRCode').show();\r\n  //   $('#mainBody').hide();\r\n  // }\r\n});\r\n\r\nfunction GetLiffId() {\r\n  //這段會依照每個帳戶不同更改\r\n  return \"1654884078-0nYB68dJ\";\r\n}\r\n\r\nfunction DecondeUtf8(decodestring) {\r\n  var decodeString = decodeURIComponent(decodestring);\r\n  console.log(decodeString);\r\n  return decodeString;\r\n}\r\n\r\nfunction GetArrQueryString(queryString) {\r\n  var strUrl = queryString;\r\n  var getPara, ParaVal;\r\n  var aryPara = [];\r\n\r\n  if (strUrl.indexOf(\"?\") !== -1) {\r\n    var getSearch = strUrl.split(\"?\");\r\n    getPara = getSearch[1].split(\"&\");\r\n    for (i = 0; i < getPara.length; i++) {\r\n      ParaVal = getPara[i].split(\"=\");\r\n      aryPara.push(ParaVal[0]);\r\n      aryPara[ParaVal[0]] = ParaVal[1];\r\n    }\r\n  }\r\n  console.log(aryPara);\r\n  return aryPara;\r\n}\r\n\r\nfunction GetInLiffAppQuertString() {\r\n  var strUrl = location.search;\r\n  var getPara, ParaVal;\r\n  var aryPara = [];\r\n\r\n  if (strUrl.indexOf(\"?\") !== -1) {\r\n    var getSearch = strUrl.split(\"?\");\r\n    getPara = getSearch[1].split(\"&\");\r\n    for (i = 0; i < getPara.length; i++) {\r\n      ParaVal = getPara[i].split(\"=\");\r\n      aryPara.push(ParaVal[0]);\r\n      aryPara[ParaVal[0]] = ParaVal[1];\r\n    }\r\n  }\r\n  console.log(aryPara);\r\n  return aryPara;\r\n}\r\n\r\n//liff.init()初始化\r\nfunction InitializeLineLiffSdk(liffId) {\r\n  liff\r\n    .init({\r\n      liffId: GetLiffId(),\r\n    })\r\n    .then(() => {\r\n      if (!liff.isLoggedIn()) {\r\n        alert(\"[Note] you're not login line now. It will turn to login page!\");\r\n        Login();\r\n        return false;\r\n      }\r\n      console.log('login OK')\r\n      KeepInitializeLineLiffSdk();\r\n            // 2021-03-16\r\n    })\r\n    .catch((err) => {\r\n      alert(err.code);\r\n      alert(err.message);\r\n    });\r\n}\r\n\r\nfunction KeepInitializeLineLiffSdk() {\r\n  console.log('keep')\r\n      // start to use LIFF's api\r\n  var os = liff.getOS();\r\n\r\n  //true: Running in LINE browser\r\n  //false: Running in external browser\r\n  var isClient = liff.isInClient();\r\n\r\n  //true: The user is logged in\r\n  //false: The user is not logged in\r\n  var isLoggedIn = liff.isLoggedIn();\r\n  var userAccessToken = liff.getAccessToken();\r\n  var decodeedIdToken = liff.getDecodedIDToken();\r\n  var context = liff.getContext();\r\n\r\n  var contextType = \"\";\r\n  var contextViewType = \"\";\r\n  var contextUserId = \"\";\r\n  var contextUtouId = \"\";\r\n  var contextRoomId = \"\";\r\n  var contextGroupId = \"\";\r\n  if (context !== null) {\r\n    contextType = context.type;\r\n    contextViewType = context.viewType;\r\n    contextUserId = context.userId;\r\n    contextUtouId = context.utouId;\r\n    contextRoomId = context.roomId;\r\n    contextGroupId = context.groupId;\r\n  }\r\n\r\n  var profileUserId = \"\";\r\n  var profileDisplayName = \"\";\r\n  var profilePictureUrl = \"\";\r\n  var profileStatusMessage = \"\";\r\n  liff\r\n    .getProfile()\r\n    .then((profile) => {\r\n      profileUserId = profile.userId;\r\n      profileDisplayName = profile.displayName;\r\n      profilePictureUrl = profile.pictureUrl;\r\n      profileStatusMessage = profile.statusMessage;\r\n\r\n      //getProfile取得的資訊\r\n      // $(\"#profileUserId\").text(profileUserId);\r\n      // $(\"#profileDisplayName\").text(profileDisplayName);\r\n      // $(\"#profilePictureUrl\").text(profilePictureUrl);\r\n      // $(\"#profileStatusMessage\").text(profileStatusMessage);\r\n\r\n      //前面取得的資訊\r\n      // $(\"#os\").text(os);\r\n      // $(\"#isClient\").text(isClient);\r\n      // $(\"#isLoggedIn\").text(isLoggedIn);\r\n      // $(\"#userAccessToken\").text(userAccessToken);\r\n      // $(\"#decodeedIdToken\").text(decodeedIdToken);\r\n      // $(\"#contextType\").text(contextType);\r\n      // $(\"#contextViewType\").text(contextViewType);\r\n      // $(\"#contextUserId\").text(contextUserId);\r\n      // $(\"#contextUtouId\").text(contextUtouId);\r\n      // $(\"#contextRoomId\").text(contextRoomId);\r\n      // $(\"#contextGroupId\").text(contextGroupId);\r\n\r\n      //getProfile取得的資訊\r\n      console.log(\"profileUserId\", profileUserId);\r\n      console.log(\"profileDisplayName\", profileDisplayName);\r\n      console.log(\"profilePictureUrl\", profilePictureUrl);\r\n      console.log(\"profileStatusMessage\", profileStatusMessage);\r\n\r\n      //前面取得的資訊\r\n      console.log(\"os\", os);\r\n      console.log(\"isClient\", isClient);\r\n      console.log(\"isLoggedIn\", isLoggedIn);\r\n      console.log(\"userAccessToken\", userAccessToken);\r\n      console.log(\"decodeedIdToken\", decodeedIdToken);\r\n      console.log(\"contextType\", contextType);\r\n      console.log(\"contextUserId\", contextUserId);\r\n      console.log(\"contextUtouId\", contextUtouId);\r\n      console.log(\"contextRoomId\", contextRoomId);\r\n      console.log(\"contextGroupId\", contextGroupId);\r\n    })\r\n    .catch((err) => {\r\n      alert(err.code);\r\n      alert(err.message);\r\n    });\r\n}\r\n\r\nfunction Login() {\r\n  //liff.login({\r\n  //    redirectUri: 'https://www.google.com/'\r\n  //});\r\n\r\n  liff.login();\r\n}\r\n"]}